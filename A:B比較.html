<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<title>åšå®¢ä¾†ï½œæ™ºæ…§æ›¸ç±é¡§å• Agent Demo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
:root{
  --green-main:#2E7D32;
  --green-light:#E8F5E9;
  --green-accent:#43A047;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans TC",sans-serif;
  background:linear-gradient(180deg,#eaf6ee,#f7f9fa);
}
header{
  background:var(--green-main);
  color:#fff;
  padding:18px;
  text-align:center;
  font-size:18px;
  font-weight:600;
}
.container{
  max-width:1200px;
  margin:24px auto;
  padding:0 20px;
}
.chat-panel{
  background:#fff;
  border-radius:16px;
  box-shadow:0 8px 24px rgba(0,0,0,.1);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  height:85vh;
}
.chat-area{
  flex:1;
  padding:24px;
  overflow-y:auto;
}
.welcome{
  text-align:center;
  padding:60px 20px;
  color:#6b7280;
}
.welcome h2{
  color:var(--green-main);
  margin-bottom:12px;
}
.msg{
  margin-bottom:18px;
  display:flex;
  opacity:0;
  transform:translateY(10px);
  animation:fadeIn 0.3s ease forwards;
}
@keyframes fadeIn{
  to{opacity:1;transform:translateY(0)}
}
.msg.user{justify-content:flex-end}
.bubble{
  max-width:85%;
  padding:14px 18px;
  border-radius:16px;
  line-height:1.8;
  font-size:14px;
}
.msg.user .bubble{
  background:var(--green-accent);
  color:#fff;
  border-radius:16px 16px 4px 16px;
}
.msg.agent .bubble{
  background:var(--green-light);
  color:#1b5e20;
  border-radius:16px 16px 16px 4px;
}
.typing-cursor{
  display:inline-block;
  width:2px;
  height:1em;
  background:var(--green-main);
  margin-left:2px;
  animation:blink 0.7s infinite;
  vertical-align:text-bottom;
}
@keyframes blink{
  0%,50%{opacity:1}
  51%,100%{opacity:0}
}
.compare-section{
  padding:20px 0;
  display:none;
}
.section-title{
  font-weight:600;
  color:var(--green-main);
  margin-bottom:16px;
  font-size:16px;
  opacity:0;
  transform:translateY(10px);
  transition:all 0.4s ease;
}
.section-title.show{
  opacity:1;
  transform:translateY(0);
}
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 4px 12px rgba(0,0,0,.06);
  opacity:0;
  transform:translateY(20px);
  transition:all 0.5s ease;
}
table.show{
  opacity:1;
  transform:translateY(0);
}
th,td{
  border:1px solid #e5e7eb;
  padding:14px 16px;
  text-align:left;
}
th{
  background:var(--green-main);
  color:#fff;
  font-weight:500;
}
th:first-child{
  background:var(--green-light);
  color:var(--green-main);
}
tr:nth-child(even){
  background:#fafafa;
}
.verdict{
  margin-top:20px;
  padding:16px 20px;
  background:linear-gradient(135deg,#e8f5e9,#c8e6c9);
  border-radius:12px;
  border-left:4px solid var(--green-main);
  opacity:0;
  transform:translateY(20px);
  transition:all 0.5s ease;
}
.verdict.show{
  opacity:1;
  transform:translateY(0);
}
.verdict-title{
  font-weight:600;
  color:var(--green-main);
  margin-bottom:8px;
}
.verdict-content{
  line-height:1.7;
  font-size:14px;
}
.cta-section{
  padding:20px 0;
  display:none;
  gap:12px;
  flex-wrap:wrap;
}
.cta-btn{
  padding:12px 20px;
  border-radius:10px;
  border:none;
  cursor:pointer;
  font-size:14px;
  transition:all 0.2s;
  opacity:0;
  transform:translateY(10px);
}
.cta-btn.show{
  opacity:1;
  transform:translateY(0);
}
.cta-btn.primary{
  background:var(--green-main);
  color:#fff;
}
.cta-btn.primary:hover{
  background:#1b5e20;
}
.cta-btn.secondary{
  background:var(--green-light);
  color:var(--green-main);
}
.cta-btn.secondary:hover{
  background:#c8e6c9;
}
.input-area{
  border-top:1px solid #e5e7eb;
  padding:14px;
  display:flex;
  gap:10px;
  flex-shrink:0;
}
.input-area input{
  flex:1;
  padding:12px 14px;
  border-radius:10px;
  border:1px solid #d1d5db;
  font-size:14px;
}
.input-area input:focus{
  outline:none;
  border-color:var(--green-main);
}
.input-area button{
  background:var(--green-main);
  color:#fff;
  border:none;
  border-radius:10px;
  padding:0 18px;
  cursor:pointer;
  font-size:14px;
  transition:background 0.2s;
}
.input-area button:hover{
  background:#1b5e20;
}
.input-area button:disabled{
  background:#9e9e9e;
  cursor:not-allowed;
}
</style>
</head>
<body>

<header>ğŸ“— åšå®¢ä¾†ï½œæ™ºæ…§æ›¸ç±é¡§å•ï¼ˆA/B æ¯”è¼ƒå±•ç¤ºï¼‰</header>

<div class="container">
  <div class="chat-panel">
    <div class="chat-area" id="chatArea">
      <div class="welcome" id="welcome">
        <h2>æ›¸ç±æ¯”è¼ƒåŠ©æ‰‹</h2>
        <p>è©¦è©¦å•æˆ‘ï¼šã€Œåº•å±¤é‚è¼¯å’Œåˆ»æ„ç·´ç¿’é€™å…©æœ¬æœ‰å•¥å·®åˆ¥ï¼Ÿã€</p>
      </div>
    </div>

    <div class="input-area">
      <input type="text" id="userInput" placeholder="æƒ³æ¯”è¼ƒå“ªå…©æœ¬æ›¸ï¼Ÿä¾‹å¦‚ï¼šåŸå­ç¿’æ…£ vs è¤‡åˆ©æ•ˆæ‡‰" />
      <button id="sendBtn" onclick="handleSend()">é€å‡º</button>
    </div>
  </div>
</div>

<script>
const chatArea = document.getElementById('chatArea');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const welcome = document.getElementById('welcome');

const agentResponse = `é€™å…©æœ¬æ›¸éƒ½åœ¨æ¢è¨ã€Œå¦‚ä½•è®“è‡ªå·±è®Šå¾—æ›´å¥½ã€ï¼Œä½†åˆ‡å…¥è§’åº¦å®Œå…¨ä¸åŒï¼š

ã€Šåº•å±¤é‚è¼¯ã€‹è‘—é‡åœ¨æ€ç¶­æ¡†æ¶â€”â€”å¹«ä½ å»ºç«‹çœ‹ä¸–ç•Œçš„æ–¹å¼ï¼Œç†è§£äº‹ç‰©é‹ä½œçš„æœ¬è³ªè¦å¾‹ã€‚è®€å®Œå¾Œï¼Œä½ æœƒæ›´æ‡‚å¾—ã€Œç‚ºä»€éº¼ã€ã€‚

ã€Šåˆ»æ„ç·´ç¿’ã€‹è‘—é‡åœ¨è¡Œç‚ºæ–¹æ³•â€”â€”å‘Šè¨´ä½ å¦‚ä½•é€éç³»çµ±åŒ–è¨“ç·´ï¼ŒæŠŠä»»ä½•æŠ€èƒ½ç·´åˆ°å°ˆå®¶ç­‰ç´šã€‚è®€å®Œå¾Œï¼Œä½ æœƒæ›´æ‡‚å¾—ã€Œæ€éº¼åšã€ã€‚

ç°¡å–®èªªï¼šä¸€æœ¬æ•™ä½ æ€è€ƒï¼Œä¸€æœ¬æ•™ä½ è¡Œå‹•ã€‚`;

const verdictText = `å¦‚æœä½ ç¾åœ¨æœ‰æ˜ç¢ºæƒ³å­¸çš„æŠ€èƒ½ï¼ˆå¦‚ç¨‹å¼ã€æ¨‚å™¨ã€èªè¨€ï¼‰ï¼Œå»ºè­°å…ˆè®€ã€Šåˆ»æ„ç·´ç¿’ã€‹ï¼›å¦‚æœä½ æƒ³æå‡æ•´é«”çš„æ€è€ƒèˆ‡åˆ¤æ–·èƒ½åŠ›ï¼Œã€Šåº•å±¤é‚è¼¯ã€‹æœƒæ˜¯æ›´å¥½çš„èµ·é»ã€‚

ç•¶ç„¶ï¼Œå…©æœ¬ä¸€èµ·è®€æ•ˆæœæœ€å¥½â€”â€”å…ˆç”¨åº•å±¤é‚è¼¯ç†è§£ã€Œç‚ºä»€éº¼ã€ï¼Œå†ç”¨åˆ»æ„ç·´ç¿’åŸ·è¡Œã€Œæ€éº¼åšã€ã€‚`;

const compareSectionHTML = `
<div class="compare-section" id="compareSection">
  <div class="section-title" id="tableTitle">âš–ï¸ è©³ç´°æ¯”è¼ƒè¡¨</div>
  <table id="compareTable">
    <tr>
      <th>æ¯”è¼ƒé¢å‘</th>
      <th>ã€Šåº•å±¤é‚è¼¯ã€‹</th>
      <th>ã€Šåˆ»æ„ç·´ç¿’ã€‹</th>
    </tr>
    <tr>
      <td><b>æ ¸å¿ƒä¸»é¡Œ</b></td>
      <td>è¬è®Šä¸­çš„ä¸è®Šâ€”â€”æ‰¾å‡ºäº‹ç‰©çš„æœ¬è³ªè¦å¾‹</td>
      <td>å°ˆå®¶æ˜¯å¦‚ä½•ç…‰æˆçš„â€”â€”ç³»çµ±åŒ–æŠ€èƒ½é¤Šæˆ</td>
    </tr>
    <tr>
      <td><b>ä½œè€…èƒŒæ™¯</b></td>
      <td>åŠ‰æ½¤ï¼ˆå•†æ¥­é¡§å•ï¼‰</td>
      <td>Anders Ericssonï¼ˆå¿ƒç†å­¸å®¶ï¼‰</td>
    </tr>
    <tr>
      <td><b>é–±è®€é›£åº¦</b></td>
      <td>ä¸­ç­‰ï¼ˆæ¦‚å¿µè¼ƒæŠ½è±¡ï¼‰</td>
      <td>ä¸­ç­‰ï¼ˆæ¡ˆä¾‹è±å¯Œæ˜“è®€ï¼‰</td>
    </tr>
    <tr>
      <td><b>å¯¦ç”¨ç¨‹åº¦</b></td>
      <td>åŸ¹é¤Šæ€ç¶­ï¼Œé•·æœŸå—ç›Š</td>
      <td>å¯ç«‹å³æ‡‰ç”¨æ–¼æŠ€èƒ½å­¸ç¿’</td>
    </tr>
    <tr>
      <td><b>é©åˆå°è±¡</b></td>
      <td>æƒ³æå‡æ±ºç­–èˆ‡åˆ¤æ–·åŠ›çš„äºº</td>
      <td>æƒ³å¿«é€Ÿç²¾é€šç‰¹å®šæŠ€èƒ½çš„äºº</td>
    </tr>
    <tr>
      <td><b>é–±è®€æ™‚é–“</b></td>
      <td>ç´„ 4-5 å°æ™‚</td>
      <td>ç´„ 5-6 å°æ™‚</td>
    </tr>
  </table>

  <div class="verdict" id="verdict">
    <div class="verdict-title">ğŸ’¡ Agent å»ºè­°</div>
    <div class="verdict-content" id="verdictContent"></div>
  </div>
</div>

<div class="cta-section" id="ctaSection">
  <button class="cta-btn primary" id="cta1" onclick="location.href='ç€è¦½è¨˜éŒ„æ¨è–¦.html'">çœ‹æ›´å¤šæ¨è–¦</button>
  <button class="cta-btn secondary" id="cta2">åŠ å…¥è³¼ç‰©è»Šï¼šåº•å±¤é‚è¼¯</button>
  <button class="cta-btn secondary" id="cta3">åŠ å…¥è³¼ç‰©è»Šï¼šåˆ»æ„ç·´ç¿’</button>
</div>`;

let isProcessing = false;

userInput.addEventListener('keypress', (e) => {
  if (e.key === 'Enter' && !isProcessing) handleSend();
});

function handleSend() {
  const text = userInput.value.trim();
  if (!text || isProcessing) return;

  isProcessing = true;
  sendBtn.disabled = true;

  if (welcome) welcome.style.display = 'none';

  addMessage(text, 'user');
  userInput.value = '';

  setTimeout(() => {
    streamMessage(agentResponse, () => {
      showComparison();
    });
  }, 600);
}

function addMessage(text, type) {
  const msg = document.createElement('div');
  msg.className = `msg ${type}`;
  msg.innerHTML = `<div class="bubble">${text.replace(/\n/g, '<br>')}</div>`;
  chatArea.appendChild(msg);
  chatArea.scrollTop = chatArea.scrollHeight;
}

function streamMessage(text, callback) {
  const msg = document.createElement('div');
  msg.className = 'msg agent';
  const bubble = document.createElement('div');
  bubble.className = 'bubble';
  msg.appendChild(bubble);
  chatArea.appendChild(msg);

  let index = 0;
  const cursor = document.createElement('span');
  cursor.className = 'typing-cursor';

  function type() {
    if (index < text.length) {
      const char = text[index];
      if (char === '\n') {
        bubble.innerHTML = bubble.innerHTML.replace(/<span class="typing-cursor"><\/span>$/, '');
        bubble.innerHTML += '<br>';
      } else {
        bubble.innerHTML = bubble.innerHTML.replace(/<span class="typing-cursor"><\/span>$/, '');
        bubble.innerHTML += char;
      }
      bubble.appendChild(cursor);
      index++;
      chatArea.scrollTop = chatArea.scrollHeight;

      const delay = char === 'ã€‚' || char === 'ï¼Œ' || char === 'ï¼š' || char === 'ï¼Ÿ' ? 80 :
                    char === '\n' ? 150 :
                    Math.random() * 20 + 15;
      setTimeout(type, delay);
    } else {
      cursor.remove();
      if (callback) callback();
    }
  }

  bubble.appendChild(cursor);
  setTimeout(type, 300);
}

function showComparison() {
  // Insert compare section into chat area
  chatArea.insertAdjacentHTML('beforeend', compareSectionHTML);

  const compareSection = document.getElementById('compareSection');
  compareSection.style.display = 'block';

  setTimeout(() => {
    document.getElementById('tableTitle').classList.add('show');
    chatArea.scrollTop = chatArea.scrollHeight;
  }, 100);

  setTimeout(() => {
    document.getElementById('compareTable').classList.add('show');
    chatArea.scrollTop = chatArea.scrollHeight;
  }, 300);

  setTimeout(() => {
    const verdict = document.getElementById('verdict');
    verdict.classList.add('show');
    chatArea.scrollTop = chatArea.scrollHeight;
    streamVerdict();
  }, 800);
}

function streamVerdict() {
  const verdictContent = document.getElementById('verdictContent');
  let index = 0;
  const cursor = document.createElement('span');
  cursor.className = 'typing-cursor';

  function type() {
    if (index < verdictText.length) {
      const char = verdictText[index];
      if (char === '\n') {
        verdictContent.innerHTML = verdictContent.innerHTML.replace(/<span class="typing-cursor"><\/span>$/, '');
        verdictContent.innerHTML += '<br>';
      } else {
        verdictContent.innerHTML = verdictContent.innerHTML.replace(/<span class="typing-cursor"><\/span>$/, '');
        verdictContent.innerHTML += char;
      }
      verdictContent.appendChild(cursor);
      index++;
      chatArea.scrollTop = chatArea.scrollHeight;

      const delay = char === 'ã€‚' || char === 'ï¼Œ' || char === 'ï¼›' ? 60 :
                    char === '\n' ? 120 :
                    Math.random() * 15 + 10;
      setTimeout(type, delay);
    } else {
      cursor.remove();
      showCTA();
    }
  }

  verdictContent.appendChild(cursor);
  setTimeout(type, 200);
}

function showCTA() {
  const ctaSection = document.getElementById('ctaSection');
  ctaSection.style.display = 'flex';
  setTimeout(() => {
    document.getElementById('cta1').classList.add('show');
    chatArea.scrollTop = chatArea.scrollHeight;
  }, 100);
  setTimeout(() => {
    document.getElementById('cta2').classList.add('show');
  }, 200);
  setTimeout(() => {
    document.getElementById('cta3').classList.add('show');
  }, 300);
  setTimeout(() => {
    isProcessing = false;
    sendBtn.disabled = false;
  }, 400);
}
</script>

</body>
</html>
